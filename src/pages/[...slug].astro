---
import ThoughtsLayout from "@layouts/thoughts-layout.astro";
import { ScrollProgress } from "@components/misc";
import { getCollection } from "astro:content";
import { getReadingTime } from "@utils/index";

const { slug } = Astro.params;

const thoughts = await getCollection("thought");

const thought = thoughts.find((p) => p.slug === slug);

if (!thought) return Astro.redirect("/404");

const post = thought;
const { Content } = await post.render();
const readingTime = getReadingTime(post.body);
const ogImage = `/og/thoughts/${slug}`;
---

<ThoughtsLayout {...thought.data} ogImage={ogImage} readingTime={readingTime}>
	<Content />
	<ScrollProgress />
</ThoughtsLayout>

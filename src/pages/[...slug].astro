---
import ThoughtsLayout from "@layouts/thoughts-layout.astro";
import { ScrollProgress } from "@components/misc";
import { getCollection } from "astro:content";
import { getReadingTime } from "@utils/index";

export async function getStaticPaths() {
	const thoughts = await getCollection("thought");
	return thoughts.map((thought) => ({
		params: { slug: thought.slug },
		props: { thought },
	}));
}

const { thought } = Astro.props;

const post = thought;
const { Content } = await post.render();
const readingTime = getReadingTime(post.body);
const ogImage = "/images/ogimage.png";
---

<ThoughtsLayout {...thought.data} ogImage={ogImage} readingTime={readingTime}>
	<Content />
	<ScrollProgress />
</ThoughtsLayout>
